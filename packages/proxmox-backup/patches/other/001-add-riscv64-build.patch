From 1faf5a07df1a39bd9dced247a46441ae00b01bc4 Mon Sep 17 00:00:00 2001
From: jiangcuo <jiangcuo@bingsin.com>
Date: Tue, 14 Nov 2023 18:05:35 +0800
Subject: [PATCH] add for riscv64

---
 debian/lintian-overrides                    |  6 +++---
 debian/proxmox-backup-file-restore.install  |  2 +-
 debian/proxmox-backup-file-restore.postinst |  2 +-
 debian/proxmox-backup-server.install        | 10 +++++-----
 pbs-buildcfg/src/lib.rs                     |  4 ++--
 5 files changed, 12 insertions(+), 12 deletions(-)

diff --git a/debian/lintian-overrides b/debian/lintian-overrides
index 809cd2972..49f1429e6 100644
--- a/debian/lintian-overrides
+++ b/debian/lintian-overrides
@@ -1,7 +1,7 @@
 proxmox-backup-server: mail-transport-agent-dependency-does-not-specify-default-mta
 proxmox-backup-server: package-installs-apt-sources [etc/apt/sources.list.d/pbs-enterprise.list]
-proxmox-backup-server: elevated-privileges 4755 root/root [usr/lib/x86_64-linux-gnu/proxmox-backup/sg-tape-cmd]
+proxmox-backup-server: elevated-privileges 4755 root/root [usr/lib/riscv64-linux-gnu/proxmox-backup/sg-tape-cmd]
 proxmox-backup-server: systemd-service-file-refers-to-unusual-wantedby-target getty.target [lib/systemd/system/proxmox-backup-banner.service]
-proxmox-backup-server: uses-dpkg-database-directly [usr/lib/x86_64-linux-gnu/proxmox-backup/proxmox-backup-api]
-proxmox-backup-server: uses-dpkg-database-directly [usr/lib/x86_64-linux-gnu/proxmox-backup/proxmox-backup-proxy]
+proxmox-backup-server: uses-dpkg-database-directly [usr/lib/riscv64-linux-gnu/proxmox-backup/proxmox-backup-api]
+proxmox-backup-server: uses-dpkg-database-directly [usr/lib/riscv64-linux-gnu/proxmox-backup/proxmox-backup-proxy]
 proxmox-backup-server: uses-dpkg-database-directly [usr/sbin/proxmox-backup-debug]
diff --git a/debian/proxmox-backup-file-restore.install b/debian/proxmox-backup-file-restore.install
index 409988a34..baf1d0422 100644
--- a/debian/proxmox-backup-file-restore.install
+++ b/debian/proxmox-backup-file-restore.install
@@ -1,4 +1,4 @@
 usr/bin/proxmox-file-restore
-usr/lib/x86_64-linux-gnu/proxmox-backup/file-restore/proxmox-restore-daemon
+usr/lib/riscv64-linux-gnu/proxmox-backup/file-restore/proxmox-restore-daemon
 usr/share/man/man1/proxmox-file-restore.1
 usr/share/zsh/vendor-completions/_proxmox-file-restore
diff --git a/debian/proxmox-backup-file-restore.postinst b/debian/proxmox-backup-file-restore.postinst
index 9792bfb46..89ff4d792 100755
--- a/debian/proxmox-backup-file-restore.postinst
+++ b/debian/proxmox-backup-file-restore.postinst
@@ -4,7 +4,7 @@ set -e
 
 update_initramfs() {
     # regenerate initramfs for single file restore VM
-    INST_PATH="/usr/lib/x86_64-linux-gnu/proxmox-backup/file-restore"
+    INST_PATH="/usr/lib/riscv64-linux-gnu/proxmox-backup/file-restore"
     CACHE_PATH="/var/cache/proxmox-backup/file-restore-initramfs.img"
     CACHE_PATH_DBG="/var/cache/proxmox-backup/file-restore-initramfs-debug.img"
 
diff --git a/debian/proxmox-backup-server.install b/debian/proxmox-backup-server.install
index ee114ea34..09951b8f2 100644
--- a/debian/proxmox-backup-server.install
+++ b/debian/proxmox-backup-server.install
@@ -7,11 +7,11 @@ etc/proxmox-backup.service /lib/systemd/system/
 usr/bin/pmt
 usr/bin/pmtx
 usr/bin/proxmox-tape
-usr/lib/x86_64-linux-gnu/proxmox-backup/proxmox-backup-api
-usr/lib/x86_64-linux-gnu/proxmox-backup/proxmox-backup-banner
-usr/lib/x86_64-linux-gnu/proxmox-backup/proxmox-backup-proxy
-usr/lib/x86_64-linux-gnu/proxmox-backup/proxmox-daily-update
-usr/lib/x86_64-linux-gnu/proxmox-backup/sg-tape-cmd
+usr/lib/riscv64-linux-gnu/proxmox-backup/proxmox-backup-api
+usr/lib/riscv64-linux-gnu/proxmox-backup/proxmox-backup-banner
+usr/lib/riscv64-linux-gnu/proxmox-backup/proxmox-backup-proxy
+usr/lib/riscv64-linux-gnu/proxmox-backup/proxmox-daily-update
+usr/lib/riscv64-linux-gnu/proxmox-backup/sg-tape-cmd
 usr/sbin/pbs2to3
 usr/sbin/proxmox-backup-debug
 usr/sbin/proxmox-backup-manager
 
